<!DOCTYPE html>
<html lang="en">
    <head>
        <title> HW5Part1</title>
    </head>

    <body>
        <header>
            <h1>hw5Part1</h1>
            <!-- post: insert data -->
            <button id="post">postBtn</button>
            <!-- get: read data -->
            <button id="get">getBtn</button>
            <!-- put: update data, or insert if a new id -->
            <button id="put">putBtn</button>
            <!-- delete: delete data -->
            <button id="delete">deleteBtn</button>
        </header>

        <main>
            <p>The response is: </p>
            <output id="response"></output>
        </main>
    </body>

    <script type="module">
        const postBtn = document.getElementById('post')
        const getBtn = document.getElementById('get')
        const putBtn = document.getElementById('put')
        const deleteBtn = document.getElementById('delete')

        const postUrl = 'https://httpbin.org/post';
        const getUrl = 'https://httpbin.org/get';

        let getData

        postBtn.addEventListener('click', ()=> {
            const xhr = new XMLHttpRequest();
            xhr.open('POST', postUrl, true);
            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4) {
                    console.log(xhr.status);
                    console.log(xhr.responseText);
                }
            };

            let data = `{"Id": 00011}`;     

            
            xhr.send(data);

        });

        getBtn.addEventListener('click', ()=> {
            const xhr = new XMLHttpRequest();
            xhr.open('Get', getUrl, true);
            xhr.onreadystatechange = function() {
                if (this.readyState === XMLHttpRequest.DONE) {
                    if (this.status === 200) {
                        const resp = JSON.parse(this.responseText);
                        getData = resp.data;
                    } else {
                        console.log('Error:', this.statusText);
                    }
                }
            };            
            xhr.send();

        });
    </script>
</html>